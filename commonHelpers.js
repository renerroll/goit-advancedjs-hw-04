import{a as b,S as v,i as P}from"./assets/vendor-3b56a289.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();const q="45390731-4de91971590831384ce1e2f20",E="https://pixabay.com/api/",f=async(t,r=1,n=22)=>{const a={key:q,q:t,image_type:"photo",orientation:"horizontal",safesearch:"true",page:r,per_page:n};try{return(await b.get(E,{params:a})).data}catch(e){throw e}},y=document.querySelector(".gallery"),I=new v(".gallery a",{captions:!0,captionsData:"alt",captionPosition:"bottom"}),D=t=>new Promise((r,n)=>{const a=new Image;a.src=t,a.onload=()=>r(t),a.onerror=e=>n(e)}),g=async(t,r=!1)=>{if(r)for(;y.firstChild;)y.removeChild(y.firstChild);const n=t.map(e=>D(e.webformatURL));await Promise.all(n);const a=document.createDocumentFragment();t.forEach(e=>{const o=document.createElement("a");o.href=e.largeImageURL,o.classList.add("gallery-item");const s=document.createElement("img");s.src=e.webformatURL,s.alt=e.tags;const i=document.createElement("div");i.classList.add("info");const u=(C,S)=>{const p=document.createElement("div");return p.innerHTML=`<p>${C}</p><p>${S}</p>`,p};i.appendChild(u("Likes",e.likes)),i.appendChild(u("Views",e.views)),i.appendChild(u("Comments",e.comments)),i.appendChild(u("Downloads",e.downloads)),o.appendChild(s),o.appendChild(i),a.appendChild(o)}),y.appendChild(a),I.refresh()},x={position:"topRight",messageColor:"white",iconColor:"white"},c=t=>{P.info({message:t,color:"#0099FF",...x})},w=document.querySelector(".search-form"),O=document.querySelector('.search-form input[name="search"]');document.querySelector(".gallery");const l=document.querySelector(".loader"),m=document.querySelector(".load-more");let h=1,L="",d=0;const R=async t=>{t.preventDefault();const r=O.value.trim();if(!r){c("Hey! enter a search query.");return}m.style.display="none",l.style.display="none",h=1,d=0,L=r;try{l.style.display="flex";const n=await f(r,h);if(d=n.hits.length,n.hits.length===0){c("Strange as it may seem, we did not find any images matching your search.");return}await g(n.hits,!0),d<n.totalHits?m.style.display="block":c("Strange as it may seem, we did not find any more images matching your search.")}catch{c("Damn! An error occurred while fetching images. Please try again later.")}finally{l.style.display="none",w.reset()}},A=async()=>{h+=1,m.style.display="none",l.style.display="flex";try{const t=await f(L,h);d+=t.hits.length,await g(t.hits);const{height:r}=document.querySelector(".gallery-item").getBoundingClientRect();window.scrollBy({top:r*2+48,behavior:"smooth"}),d>=t.totalHits?c("Strange as it may seem, we did not find any more images matching your search."):m.style.display="block"}catch{c("Damn! An error occurred while fetching images. Please try again later.")}finally{l.style.display="none"}};w.addEventListener("submit",R);m.addEventListener("click",A);
//# sourceMappingURL=commonHelpers.js.map
